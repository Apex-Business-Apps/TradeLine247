const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dpo-kh1j.js","assets/react-vendor-a1y4eqJD.js","assets/react-query-DHkNQnk-.js","assets/radix-primitives-BmowSk35.js","assets/radix-overlays-COL35z5_.js","assets/supabase-Ccy6tpTo.js","assets/react-router-DP697y4K.js","assets/radix-forms-DXrNnkJS.js","assets/index-BBzfy_hb.css","assets/PWAInstallBanner-Cvar9WVi.js"])))=>i.map(i=>d[i]);
import{e,_ as t}from"./index-Dpo-kh1j.js";import"./react-vendor-a1y4eqJD.js";import"./react-query-DHkNQnk-.js";import"./radix-primitives-BmowSk35.js";import"./radix-overlays-COL35z5_.js";import"./supabase-Ccy6tpTo.js";import"./react-router-DP697y4K.js";import"./radix-forms-DXrNnkJS.js";let r=null;function n(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),r=e,window.dispatchEvent(new CustomEvent("tl247:pwa-ready",{detail:{prompt:r}}))}),window.addEventListener("tl247:pwa-ready",()=>{!function(){if(document.querySelector("#pwa-install-banner"))return;const e=document.createElement("div");e.id="pwa-install-banner",document.body.appendChild(e),Promise.all([t(()=>import("./react-vendor-a1y4eqJD.js").then(e=>e.R),[]),t(()=>import("./index-Dpo-kh1j.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),t(()=>import("./PWAInstallBanner-Cvar9WVi.js"),__vite__mapDeps([9,2,1,0,3,4,5,6,7,8]))]).then(([t,r,{PWAInstallBanner:n}])=>{r.createRoot(e).render(t.createElement(n))})}()})}function o(){return r}async function a(){if(!r)return!1;try{r.prompt();const{outcome:e}=await r.userChoice;if("accepted"===e)return r=null,function(){const e=document.querySelector("#pwa-install-banner");e&&e.remove()}(),!0}catch(t){e.report({type:"error",message:`PWA install failed: ${t}`,stack:t instanceof Error?t.stack:void 0,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent,environment:e.getEnvironment()})}return!1}export{o as getPWAPrompt,n as initPWAInstall,a as installPWA};
