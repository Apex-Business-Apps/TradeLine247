import{j as e}from"./react-query-DHkNQnk-.js";import{r as s,e as a}from"./react-vendor-a1y4eqJD.js";import{a as t,C as r,d as l,f as i,h as n,n as c,j as o,z as d,e as m,P as x,ab as u,ac as p,k as h,X as g,ad as f,O as j,ae as b,a1 as N,L as v,I as y,a2 as w,af as k,S as C,a3 as R}from"./index-Dpo-kh1j.js";import{S,u as D}from"./ClientDashboard-DhLEEXce.js";import{C as A}from"./calendar-WFnLrOV8.js";import{C as _}from"./circle-check-BQj80rBD.js";import{C as I}from"./circle-alert-DR1cr_I8.js";import{H as L,J as O,K as E,M as $,N as T,O as M,Q as P,U as q,u as z,a as F,b as W,W as V,X as G,g as Y,f as B,m as Q}from"./radix-overlays-COL35z5_.js";import{P as H,a as K,b as U}from"./radix-primitives-BmowSk35.js";import"./supabase-Ccy6tpTo.js";import"./react-router-DP697y4K.js";import"./radix-forms-DXrNnkJS.js";import"./refresh-cw-D8MiUO2G.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=t("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),J=t("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),Z=t("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),ee=({nextItems:s=[],isLoading:a=!1})=>e.jsxs(r,{className:"border-0",style:{boxShadow:"var(--premium-shadow-subtle)",background:"linear-gradient(135deg, hsl(var(--card) / 0.95) 0%, hsl(var(--card) / 0.9) 100%)"},"data-testid":"next-actions-card",children:[e.jsxs(l,{className:"pb-4",children:[e.jsx(i,{className:"text-lg font-semibold text-foreground",children:"Today's appointments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upcoming calls and meetings"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-xs text-muted-foreground/80 mb-3",children:"Tap to confirm or move an appointment."}),a?e.jsx("div",{className:"space-y-3",children:Array.from({length:2}).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card/50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(S,{className:"h-4 w-20"}),e.jsx(S,{className:"h-4 w-32"}),e.jsx(S,{className:"h-4 w-16"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(S,{className:"h-6 w-16"}),e.jsx(S,{className:"h-6 w-20"})]})]},a))}):s.length>0?e.jsx("div",{className:"space-y-3",children:s.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card/50 rounded-lg border hover:bg-card/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.contact})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[e.jsx(c,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.whenISO).toLocaleTimeString()})]})]}),e.jsx("div",{className:"flex space-x-2",children:s.actions.map(a=>e.jsx(o,{size:"sm",variant:"outline",onClick:()=>{s.id},className:"text-xs",children:a},a))})]},s.id))}):e.jsx("div",{className:"text-center text-muted-foreground/70 py-6",children:"Nothing queued right now."})]})]}),se=()=>{const[a,t]=s.useState([]),[c,o]=s.useState(!0);s.useEffect(()=>{!async function(){try{const e=new Date;e.setDate(e.getDate()-7);const{data:s,error:a}=await d.from("analytics_events").select("*").in("event_type",["appointment_created","voice_call_completed","lead_captured"]).gte("created_at",e.toISOString()).order("created_at",{ascending:!1}).limit(5);if(a)throw a;t(s||[])}catch(e){m.report({type:"error",message:`Error fetching wins: ${e instanceof Error?e.message:String(e)}`,stack:e instanceof Error?e.stack:void 0,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent,environment:m.getEnvironment()})}finally{o(!1)}}()},[]);const p=e=>"appointment_created"===e?"New booking":"voice_call_completed"===e?"Call completed":"lead_captured"===e?"Lead captured":"Activity",h=e=>{const s=new Date(e),a=(new Date).getTime()-s.getTime(),t=Math.floor(a/6e4);if(t<60)return`${t}m ago`;const r=Math.floor(t/60);if(r<24)return`${r}h ago`;return`${Math.floor(r/24)}d ago`};return e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsx(i,{className:"text-lg",children:"Recent Wins"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Good things happening this week"})]}),e.jsx(n,{children:c?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2",children:[e.jsx(S,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(S,{className:"h-4 w-24"}),e.jsx(S,{className:"h-3 w-16"})]})]},a))}):a.length>0?e.jsx("div",{className:"space-y-3",children:a.map(s=>{const a=(t=s.event_type).includes("appointment")?_:t.includes("call")?x:u;var t;return e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(a,{className:"h-4 w-4 text-success dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:p(s.event_type)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h(s.created_at)})]})]},s.id)})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your AI receptionist hasn't logged activity yet this week. Check back soon!"})})]})},ae=a.memo(()=>{const[a,t]=s.useState([{name:"Supabase",status:"operational",lastCheck:new Date},{name:"Twilio",status:"operational",lastCheck:new Date}]);s.useEffect(()=>{const e=async()=>{const e=new Date,s=[];try{const{error:a}=await d.from("analytics_events").select("id").limit(1);s.push({name:"Supabase",status:a?"down":"operational",lastCheck:e})}catch{s.push({name:"Supabase",status:"down",lastCheck:e})}try{const a=new Date(e.getTime()-3e5),{data:t,error:r}=await d.from("analytics_events").select("id").eq("event_type","voice_call_incoming").gte("created_at",a.toISOString()).limit(1);s.push({name:"Twilio",status:!r&&t?"operational":"degraded",lastCheck:e})}catch{s.push({name:"Twilio",status:"degraded",lastCheck:e})}t(s)};e();const s=setInterval(e,6e4);return()=>clearInterval(s)},[]);const l=a.every(e=>"operational"===e.status),i=a.some(e=>"down"===e.status);return e.jsx(r,{className:""+(l?"border-green-200 dark:border-green-800":i?"border-red-200 dark:border-red-800":"border-amber-200 dark:border-amber-800"),children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Service Health"}),l?e.jsxs("div",{className:"flex items-center gap-1 text-[hsl(142,85%,25%)] dark:text-green-400",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-[hsl(142,85%,25%)] animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs",children:"All systems operational"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-amber-800 dark:text-amber-400",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-amber-600 animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs",children:"Service issues detected"})]})]}),e.jsx("div",{className:"space-y-2",children:a.map(s=>{return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(a=s.status,"operational"===a?e.jsx(_,{className:"h-4 w-4 text-[hsl(142,85%,25%)]","aria-hidden":"true"}):"down"===a?e.jsx(I,{className:"h-4 w-4 text-red-700","aria-hidden":"true"}):e.jsx(c,{className:"h-4 w-4 text-amber-700","aria-hidden":"true"})),e.jsx("span",{className:"text-muted-foreground",children:s.name})]}),e.jsx("span",{className:"text-xs "+("operational"===s.status?"text-[hsl(142,85%,25%)] dark:text-green-400":"down"===s.status?"text-red-700 dark:text-red-400":"text-amber-800 dark:text-amber-400"),children:"operational"===s.status?"Online":"down"===s.status?"Offline":"Degraded"})]},s.name);var a})})]})})}),te=({kpi:s,title:a,subtitle:t,icon:l,color:i,bgColor:c,ariaLabel:o,trend:d,badge:m})=>{return e.jsx(r,{className:"relative overflow-hidden border-0",style:{boxShadow:"var(--premium-shadow-subtle)",background:"linear-gradient(135deg, hsl(var(--card) / 0.95) 0%, hsl(var(--card) / 0.9) 100%)"},role:"article","aria-label":o,children:e.jsxs(n,{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:`p-1.5 rounded-md ${c}`,children:e.jsx(l,{className:`h-3 w-3 ${i}`})}),d&&e.jsx("div",{className:"text-xs text-success dark:text-green-400 font-medium",children:d}),m&&e.jsx("div",{className:"px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-success dark:text-green-300 text-xs font-medium",children:m})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xl font-bold text-foreground",children:(x=s.value,u=s.currency,u?`$${x.toLocaleString()}`:"answerRate"===s.id?`${x}%`:x.toString())}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:a}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:t})]})]})});var x,u},re={isWelcomeDialogOpen:!1,isSettingsDialogOpen:!1,isQuickActionDialogOpen:!1,selectedQuickAction:null,isRefreshing:!1,isSyncing:!1,selectedKpiId:null,selectedTranscriptId:null,sidebarCollapsed:!1,showNotifications:!1,notificationCount:0},le=p(e=>({...re,setWelcomeDialogOpen:s=>e({isWelcomeDialogOpen:s}),setSettingsDialogOpen:s=>e({isSettingsDialogOpen:s}),setQuickActionDialog:(s,a=null)=>e({isQuickActionDialogOpen:s,selectedQuickAction:a}),setRefreshing:s=>e({isRefreshing:s}),setSyncing:s=>e({isSyncing:s}),setSelectedKpi:s=>e({selectedKpiId:s}),setSelectedTranscript:s=>e({selectedTranscriptId:s}),toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setShowNotifications:s=>e(e=>({showNotifications:s,notificationCount:s?0:e.notificationCount})),incrementNotificationCount:()=>e(e=>({notificationCount:e.notificationCount+1})),clearNotificationCount:()=>e({notificationCount:0}),reset:()=>e(re)})),ie=L,ne=O,ce=s.forwardRef(({className:s,...a},t)=>e.jsx(M,{ref:t,className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));ce.displayName=M.displayName;const oe=s.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ne,{children:[e.jsx(ce,{}),e.jsxs(E,{ref:r,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs($,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));oe.displayName=E.displayName;const de=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});de.displayName="DialogHeader";const me=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});me.displayName="DialogFooter";const xe=s.forwardRef(({className:s,...a},t)=>e.jsx(T,{ref:t,className:h("text-lg font-semibold leading-none tracking-tight",s),...a}));xe.displayName=T.displayName;const ue=s.forwardRef(({className:s,...a},t)=>e.jsx(P,{ref:t,className:h("text-sm text-muted-foreground",s),...a}));ue.displayName=P.displayName;var pe="Radio",[he,ge]=W(pe),[fe,je]=he(pe),be=s.forwardRef((a,t)=>{const{__scopeRadio:r,name:l,checked:i=!1,required:n,disabled:c,value:o="on",onCheck:d,form:m,...x}=a,[u,p]=s.useState(null),h=K(t,e=>p(e)),g=s.useRef(!1),f=!u||(m||!!u.closest("form"));return e.jsxs(fe,{scope:r,checked:i,disabled:c,children:[e.jsx(H.button,{type:"button",role:"radio","aria-checked":i,"data-state":we(i),"data-disabled":c?"":void 0,disabled:c,value:o,...x,ref:h,onClick:Y(a.onClick,e=>{i||null==d||d(),f&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),f&&e.jsx(ye,{control:u,bubbles:!g.current,name:l,value:o,checked:i,required:n,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});be.displayName=pe;var Ne="RadioIndicator",ve=s.forwardRef((s,a)=>{const{__scopeRadio:t,forceMount:r,...l}=s,i=je(Ne,t);return e.jsx(U,{present:r||i.checked,children:e.jsx(H.span,{"data-state":we(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:a})})});ve.displayName=Ne;var ye=s.forwardRef(({__scopeRadio:a,control:t,checked:r,bubbles:l=!0,...i},n)=>{const c=s.useRef(null),o=K(c,n),d=B(r),m=Q(t);return s.useEffect(()=>{const e=c.current;if(!e)return;const s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked").set;if(d!==r&&a){const s=new Event("click",{bubbles:l});a.call(e,r),e.dispatchEvent(s)}},[d,r,l]),e.jsx(H.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function we(e){return e?"checked":"unchecked"}ye.displayName="RadioBubbleInput";var ke=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ce="RadioGroup",[Re]=W(Ce,[q,ge]),Se=q(),De=ge(),[Ae,_e]=Re(Ce),Ie=s.forwardRef((s,a)=>{const{__scopeRadioGroup:t,name:r,defaultValue:l,value:i,required:n=!1,disabled:c=!1,orientation:o,dir:d,loop:m=!0,onValueChange:x,...u}=s,p=Se(t),h=z(d),[g,f]=F({prop:i,defaultProp:l??null,onChange:x,caller:Ce});return e.jsx(Ae,{scope:t,name:r,required:n,disabled:c,value:g,onValueChange:f,children:e.jsx(V,{asChild:!0,...p,orientation:o,dir:h,loop:m,children:e.jsx(H.div,{role:"radiogroup","aria-required":n,"aria-orientation":o,"data-disabled":c?"":void 0,dir:h,...u,ref:a})})})});Ie.displayName=Ce;var Le="RadioGroupItem",Oe=s.forwardRef((a,t)=>{const{__scopeRadioGroup:r,disabled:l,...i}=a,n=_e(Le,r),c=n.disabled||l,o=Se(r),d=De(r),m=s.useRef(null),x=K(t,m),u=n.value===i.value,p=s.useRef(!1);return s.useEffect(()=>{const e=e=>{ke.includes(e.key)&&(p.current=!0)},s=()=>p.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)}},[]),e.jsx(G,{asChild:!0,...o,focusable:!c,active:u,children:e.jsx(be,{disabled:c,required:n.required,checked:u,...d,...i,name:n.name,ref:x,onCheck:()=>n.onValueChange(i.value),onKeyDown:Y(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:Y(i.onFocus,()=>{var e;p.current&&(null==(e=m.current)||e.click())})})})});Oe.displayName=Le;var Ee=s.forwardRef((s,a)=>{const{__scopeRadioGroup:t,...r}=s,l=De(t);return e.jsx(ve,{...l,...r,ref:a})});Ee.displayName="RadioGroupIndicator";var $e=Ie,Te=Oe,Me=Ee;const Pe=s.forwardRef(({className:s,...a},t)=>e.jsx($e,{className:h("grid gap-2",s),...a,ref:t}));Pe.displayName=$e.displayName;const qe=s.forwardRef(({className:s,...a},t)=>e.jsx(Te,{ref:t,className:h("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Me,{className:"flex items-center justify-center",children:e.jsx(f,{className:"h-2.5 w-2.5 fill-current text-current"})})}));qe.displayName=Te.displayName;const ze=({open:a,onOpenChange:t})=>{const[r,l]=s.useState(1),[i,n]=s.useState(""),{setOnboardingCompleted:c,setPreferredName:d,setDashboardLayout:m,setTheme:x,updateLastLogin:u,theme:p,dashboardLayout:h,preferredName:g}=j(),{setTheme:f}=b(),[k,C]=s.useState(h||"comfortable"),[R,S]=s.useState(p||"system");s.useEffect(()=>{p&&S(p),h&&C(h),g&&n(g)},[p,h,g]);return e.jsx(ie,{open:a,onOpenChange:t,children:e.jsxs(oe,{className:"sm:max-w-[500px]",children:[e.jsx(de,{className:"sr-only",children:e.jsx(xe,{children:"Welcome"})}),(()=>{switch(r){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full",children:e.jsx(w,{className:"h-12 w-12 text-blue-500"})})}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(xe,{className:"text-2xl font-bold",children:"Welcome to TradeLine247!"}),e.jsx(ue,{className:"text-base text-slate-700 dark:text-slate-300",children:"Your AI receptionist is ready to help you capture every opportunity. Let's personalize your experience in just a few steps."})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(xe,{className:"text-xl font-bold",children:"What should we call you?"}),e.jsx(ue,{className:"text-slate-700 dark:text-slate-300",children:"We'll use this to personalize your dashboard greeting."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"name",children:"Preferred Name"}),e.jsx(y,{id:"name",placeholder:"Enter your name...",value:i,onChange:e=>n(e.target.value),className:"text-center text-lg",autoFocus:!0})]}),e.jsx("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:"Don't worry, you can change this anytime in settings."})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Z,{className:"h-10 w-10 text-blue-500"})}),e.jsx(xe,{className:"text-xl font-bold",children:"Choose Your Layout"}),e.jsx(ue,{className:"text-slate-700 dark:text-slate-300",children:"How would you like your dashboard to look?"})]}),e.jsx(Pe,{value:k,onValueChange:e=>C(e),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(v,{htmlFor:"compact",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"compact"===k?"hsl(var(--primary))":"transparent"},children:[e.jsx(qe,{value:"compact",id:"compact"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Compact"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"More info in less space"})]})]}),e.jsxs(v,{htmlFor:"comfortable",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"comfortable"===k?"hsl(var(--primary))":"transparent"},children:[e.jsx(qe,{value:"comfortable",id:"comfortable"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Comfortable (Recommended)"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Balanced spacing and readability"})]})]}),e.jsxs(v,{htmlFor:"spacious",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"spacious"===k?"hsl(var(--primary))":"transparent"},children:[e.jsx(qe,{value:"spacious",id:"spacious"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Spacious"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Maximum breathing room"})]})]})]})})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(J,{className:"h-10 w-10 text-blue-500"})}),e.jsx(xe,{className:"text-xl font-bold",children:"Pick Your Theme"}),e.jsx(ue,{className:"text-slate-700 dark:text-slate-300",children:"Choose the appearance that works best for you."})]}),e.jsx(Pe,{value:R,onValueChange:e=>S(e),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(v,{htmlFor:"light",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"light"===R?"hsl(var(--primary))":"transparent"},children:[e.jsx(qe,{value:"light",id:"light"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Light"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Bright and clean"})]})]}),e.jsxs(v,{htmlFor:"dark",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"dark"===R?"hsl(var(--primary))":"transparent"},children:[e.jsx(qe,{value:"dark",id:"dark"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Dark"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Easy on the eyes"})]})]}),e.jsxs(v,{htmlFor:"system",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"system"===R?"hsl(var(--primary))":"transparent"},children:[e.jsx(qe,{value:"system",id:"system"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"System (Recommended)"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Matches your device settings"})]})]})]})})]});default:return null}})(),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:4}).map((s,a)=>e.jsx("div",{className:"h-2 w-2 rounded-full transition-all "+(a+1===r?"bg-primary w-6":a+1<r?"bg-primary/50":"bg-muted")},a))}),e.jsxs(me,{className:"flex-row justify-between sm:justify-between",children:[r>1?e.jsx(o,{variant:"outline",onClick:()=>{r>1&&l(r-1)},children:"Previous"}):e.jsx("div",{}),r<4?e.jsx(o,{onClick:()=>{r<4&&l(r+1)},children:"Next"}):e.jsxs(o,{onClick:()=>{i&&d(i),m(k),x(R),f(R),c(!0),u(),t(!1)},className:"gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Complete Setup"]})]})]})})},Fe=({kpisData:s=[],nextItemsCount:a=0,transcriptsCount:t=0})=>{const{recentActions:c,addRecentAction:d}=j(),m=(()=>{const e=[],t=(new Date).getHours();t>=9&&t<12&&e.push({id:"morning-check",icon:A,title:"Morning Routine",description:"Review your upcoming appointments for today to stay prepared.",action:"View Calendar",color:"text-info dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"});const r=s.find(e=>"answerRate"===e.id);r&&r.value<80&&e.push({id:"improve-answer-rate",icon:x,title:"Boost Your Answer Rate",description:`Your answer rate is at ${r.value}%. Consider adjusting your AI settings to catch more calls.`,action:"Optimize Settings",color:"text-brand-primary dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30"}),a>5&&e.push({id:"manage-appointments",icon:A,title:"Busy Schedule Ahead",description:`You have ${a} upcoming items. Review and prioritize to stay on track.`,action:"Review Schedule",color:"text-neutral dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30"});const l=s.find(e=>"bookings"===e.id);return l&&l.deltaPct&&l.deltaPct>20&&e.push({id:"trending-up",icon:u,title:"Great Momentum!",description:`Bookings are up ${l.deltaPct}% this week. Keep up the excellent work!`,action:"View Insights",color:"text-success dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"}),c.length<5&&e.push({id:"getting-started",icon:X,title:"Getting Started",description:"Explore the Quick Actions menu to see what your AI receptionist can do.",action:"Explore Features",color:"text-amber-800 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30"}),0===e.length&&e.push({id:"general-tip",icon:X,title:"Pro Tip",description:"Review your recent call transcripts to identify common questions and improve your responses.",action:"View Transcripts",color:"text-info dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"}),e.slice(0,2)})();return e.jsxs(r,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-amber-700"}),e.jsx(i,{className:"text-lg",children:"Tips for You"})]})}),e.jsx(n,{className:"space-y-4",children:m.map(s=>{const a=s.icon;return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.bgColor} shrink-0`,children:e.jsx(a,{className:`h-4 w-4 ${s.color}`})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:s.description})]}),e.jsxs(o,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",onClick:()=>{return e=s.id,void d(`Clicked tip: ${e}`);var e},children:[s.action," â†’"]})]})]},s.id)})})]})},We=()=>{const{kpis:a,nextItems:t,transcripts:c,isLoading:o,hasData:d}=D(),{hasCompletedOnboarding:m,dashboardLayout:u,showQuickActions:p,showServiceHealth:h,showRecentActivity:g}=j(),{isWelcomeDialogOpen:f,setWelcomeDialogOpen:b}=le();s.useEffect(()=>{m||f||b(!0)},[m,f,b]);const N="compact"===u?"space-y-4":"spacious"===u?"space-y-8":"space-y-6",v="compact"===u?"gap-3":"spacious"===u?"gap-6":"gap-4";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:N,children:[e.jsx("div",{className:`grid grid-cols-2 md:grid-cols-4 ${v}`,children:o?Array.from({length:4}).map((s,a)=>e.jsx(r,{className:"relative overflow-hidden border-0",children:e.jsxs(n,{className:"p-3",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx(S,{className:"h-6 w-6 rounded-md"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"h-6 w-16"}),e.jsx(S,{className:"h-3 w-20"}),e.jsx(S,{className:"h-3 w-24"})]})]})},a)):d?a.map(s=>{const a=(e=>{const s={bookings:{title:"Bookings this week",subtitle:"New appointments scheduled",icon:A,color:"text-info dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30",ariaLabel:"Weekly bookings performance"},payout:{title:"Expected payout",subtitle:"Revenue from active calls",icon:R,color:"text-success dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",ariaLabel:"Expected revenue payout"},answerRate:{title:"Calls we caught",subtitle:"Answer rate this period",icon:x,color:"text-neutral dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30",ariaLabel:"Call answer rate performance"},rescued:{title:"Missed but saved",subtitle:"Calls recovered by AI",icon:C,color:"text-brand-primary dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30",ariaLabel:"Calls rescued from being missed"}};return s[e]||s.bookings})(s.id);return e.jsx(te,{kpi:s,...a,trend:s.deltaPct?s.deltaPct>0?`+${s.deltaPct}%`:`${s.deltaPct}%`:void 0},s.id)}):Array.from({length:4}).map((s,a)=>{const t=[{title:"Bookings this week",subtitle:"No appointments yet this week"},{title:"Expected payout",subtitle:"Revenue will calculate from calls"},{title:"Calls we caught",subtitle:"No calls received yet"},{title:"Missed but saved",subtitle:"No recovered calls yet"}];return e.jsx(r,{className:"relative overflow-hidden border-0 opacity-70 hover:opacity-90 transition-opacity",children:e.jsx(n,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground dark:text-foreground/60",children:"0"}),e.jsx("p",{className:"text-xs font-medium text-muted-foreground dark:text-foreground/80",children:t[a].title}),e.jsx("p",{className:"text-xs text-muted-foreground/70 dark:text-foreground/70",children:t[a].subtitle})]})})},a)})}),e.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-3 ${v}`,children:[e.jsxs("div",{className:`lg:col-span-2 ${N}`,children:[e.jsx(ee,{nextItems:t,isLoading:o}),g&&e.jsxs(r,{children:[e.jsx(l,{children:e.jsx(i,{className:"text-lg",children:"Recent Activity"})}),e.jsx(n,{children:o?e.jsx("div",{className:"space-y-3",children:Array.from({length:2}).map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-card/50 rounded-lg",children:[e.jsx(S,{className:"h-8 w-8 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(S,{className:"h-4 w-32"}),e.jsx(S,{className:"h-3 w-full"}),e.jsx(S,{className:"h-3 w-24"})]})]},a))}):d&&c.length>0?e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-card/50 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:e.jsx(x,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:s.caller}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.atISO).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.summary}),s.needsReply&&e.jsx("div",{className:"text-xs text-brand-primary dark:text-orange-400 font-medium",children:"Needs reply"})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 space-y-3",children:[e.jsx("div",{className:"inline-flex p-3 rounded-full bg-muted/50 mb-2",children:e.jsx(x,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("p",{className:"font-medium text-foreground",children:"No activity yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your dashboard will populate once calls start coming in"})]})})]})]}),e.jsxs("div",{className:N,children:[e.jsx(se,{}),e.jsx(Fe,{kpisData:a,nextItemsCount:(null==t?void 0:t.length)||0,transcriptsCount:(null==c?void 0:c.length)||0}),p&&e.jsx("section",{className:"quick-actions md:sticky md:top-4 ios-no-sticky",children:e.jsx(k,{})}),h&&e.jsx(ae,{})]})]})]}),e.jsx(ze,{open:f,onOpenChange:b})]})};export{We as NewDashboard};
